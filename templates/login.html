{% extends 'base.html' %}
{% load static %}
{% load socialaccount %}

{% block title %}Login - ProWebSec{% endblock %}
{% block body_class %}auth-page login-page{% endblock %}

{% block extra_css %}
<style>
    .login-container {
        display: flex;
        min-height: calc(100vh - 70px);
        margin-top: 20px;
    }
    .login-left {
        flex: 1;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 3rem;
        color: white;
        position: relative;
        overflow: hidden;
        border-radius: 20px;
        box-shadow: 0 20px 50px rgba(102, 126, 234, 0.35);
    }
    .login-left::before {
        content: '';
        position: absolute;
        inset: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="white" opacity="0.1"/><circle cx="80" cy="80" r="2" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="1" fill="white" opacity="0.1"/><circle cx="10" cy="60" r="1" fill="white" opacity="0.1"/><circle cx="90" cy="40" r="1" fill="white" opacity="0.1"/></svg>');
        opacity: 0.3;
    }
    .login-left-content {
        position: relative;
        z-index: 2;
        text-align: center;
        max-width: 500px;
    }
    .login-logo {
        font-size: 3rem;
        font-weight: 700;
        margin-bottom: 2rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 1rem;
    }
    .login-logo i { font-size: 4rem; opacity: 0.9; }
    .login-left h1 {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 1rem;
        line-height: 1.2;
    }
    .login-left p {
        font-size: 1.15rem;
        opacity: 0.92;
        line-height: 1.6;
    }
    .login-right {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 3rem;
        background: linear-gradient(135deg, #f8fafc 0%, #eef2ff 100%);
    }
    .login-card {
        background: white;
        border-radius: 24px;
        padding: 3rem;
        width: 100%;
        max-width: 440px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
        animation: slideIn 0.5s ease-out;
        border: 1px solid #e2e8f0;
    }
    @keyframes slideIn {
        from { opacity: 0; transform: translateX(30px); }
        to { opacity: 1; transform: translateX(0); }
    }
    .login-card-header { margin-bottom: 2rem; }
    .login-card-header h2 {
        font-size: 1.875rem;
        font-weight: 700;
        color: #1e293b;
        margin-bottom: 0.5rem;
    }
    .login-card-header p { color: #64748b; font-size: 1rem; }
    .login-form .form-group { margin-bottom: 1.5rem; transition: transform 0.2s ease; }
    .login-form label {
        display: block;
        font-weight: 500;
        color: #1e293b;
        margin-bottom: 0.5rem;
        font-size: 0.9rem;
    }
    .login-form input {
        width: 100%;
        padding: 0.875rem 1rem;
        border: 2px solid #e2e8f0;
        border-radius: 12px;
        font-size: 1rem;
        transition: all 0.3s ease;
        box-sizing: border-box;
        background: #f8fafc;
    }
    .login-form input:focus {
        outline: none;
        border-color: #2563eb;
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.15);
        background: #fff;
    }
    .login-btn {
        width: 100%;
        padding: 1rem;
        background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
        color: white;
        border: none;
        border-radius: 12px;
        font-size: 1rem;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 0.5rem;
        box-shadow: 0 15px 30px rgba(37, 99, 235, 0.25);
    }
    .login-btn:hover { transform: translateY(-2px) scale(1.01); }
    .login-footer { margin-top: 1.5rem; text-align: center; }
    .login-footer-links {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
        gap: 1rem;
        flex-wrap: wrap;
    }
    .login-footer-links a {
        color: #2563eb;
        text-decoration: none;
        font-size: 0.9rem;
        font-weight: 600;
    }
    .login-footer-links a:hover { text-decoration: underline; }
    .messages-container { margin-bottom: 1.5rem; }
    .alert {
        padding: 1rem;
        border-radius: 12px;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        font-size: 0.9rem;
    }
    .alert-success { background: #d1fae5; color: #065f46; border: 1px solid #6ee7b7; }
    .alert-error { background: #fee2e2; color: #991b1b; border: 1px solid #fca5a5; }
    @media (max-width: 968px) {
        .login-container { flex-direction: column; }
        .login-left { min-height: 40vh; padding: 2rem; }
        .login-right { padding: 2rem 1rem; }
        .login-card { padding: 2rem 1.5rem; }
    }
    @media (max-width: 640px) {
        .login-left { min-height: 32vh; padding: 1.5rem; }
        .login-card { padding: 1.5rem; }
        .login-footer-links { flex-direction: column; align-items: flex-start; }
    }
</style>
{% endblock %}

{% block content %}
<section class="auth-content login-page">
    <div class="login-container">
        <div class="login-left">
            <div class="login-left-content">
                <div class="login-logo">
                    <i class="fas fa-shield-alt"></i>
                    <span>ProWebSec</span>
                </div>
                <h1>Welcome Back!</h1>
                <p>Sign in to continue to your account and access all our services.</p>
            </div>
        </div>

        <div class="login-right">
            <div class="login-card">
                <div class="login-card-header">
                    <h2>Sign In</h2>
                    <p>Enter your credentials to access your account</p>
                </div>

                {% if messages %}
                    <div class="messages-container">
                        {% for message in messages %}
                            <div class="alert alert-{{ message.tags }}">
                                <i class="fas fa-{% if message.tags == 'success' %}check-circle{% else %}exclamation-circle{% endif %}"></i>
                                <span>{{ message }}</span>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}

                <div class="oauth-buttons">
                    <a class="btn oauth-btn google-btn" href="{% provider_login_url 'google' %}">
                        <svg viewBox="0 0 48 48" class="oauth-icon"><path fill="#FFC107" d="M43.6 20.5H42V20H24v8h11.3C34.1 31.9 29.6 35 24 35 16.8 35 11 29.2 11 22s5.8-13 13-13c3.3 0 6.3 1.2 8.6 3.3l5.7-5.7C34.6 3.2 29.6 1 24 1 11.8 1 2 10.8 2 23s9.8 22 22 22c12 0 21-9 21-22 0-1.1-.1-2.3-.4-3.5z"/><path fill="#FF3D00" d="M6.3 14.7l6.6 4.8C14.5 16 18.8 13 24 13c3.3 0 6.3 1.2 8.6 3.3l5.7-5.7C34.6 3.2 29.6 1 24 1 16 1 9.1 5.4 6.3 14.7z"/><path fill="#4CAF50" d="M24 45c5.5 0 10.4-1.8 14-5l-6.5-5.3C29.2 36 26.7 37 24 37c-5.6 0-10.3-3.7-12-8.9l-6.6 5.1C8.1 40.6 15.4 45 24 45z"/><path fill="#1976D2" d="M43.6 20.5H42V20H24v8h11.3c-.5 2.5-1.9 4.6-3.9 6.1l6.5 5.3C40.5 36.7 43 30.9 43 24c0-1.1-.1-2.3-.4-3.5z"/></svg>
                        <span>Continue with Google</span>
                    </a>
                    <a class="btn oauth-btn github-btn" href="{% provider_login_url 'github' %}">
                        <svg class="oauth-icon" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8a8 8 0 0 0 5.47 7.59c.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2 0-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82a7.65 7.65 0 0 1 4 0c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.19 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8Z"/></svg>
                        <span>Continue with GitHub</span>
                    </a>
                </div>

                <form method="POST" class="login-form" autocomplete="on">
                    {% csrf_token %}
                    {% if request.GET.next %}
                        <input type="hidden" name="next" value="{{ request.GET.next }}">
                    {% endif %}
                    
                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <input type="email" id="email" name="email" required placeholder="Enter your email" autocomplete="email">
                    </div>
                    
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" name="password" required placeholder="Enter your password" autocomplete="current-password">
                    </div>
                    
                    <button type="submit" class="login-btn">
                        LOGIN
                    </button>
                </form>
                
                <div class="login-footer">
                    <div class="login-footer-links">
                        <a href="{% url 'register' %}">Signup</a>
                        <a href="{% url 'password_reset' %}">Forgot password?</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
